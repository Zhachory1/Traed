$(function(){function e(e){i=e,$(".single").removeClass("active"),$("#"+i).addClass("active"),$("#graph").html('<iframe frameBorder="0" src="chart.php?sym='+a[e][0]+'"></iframe>'),Highcharts.getOptions().plotOptions.pie.colors=function(){var e,t=[],o=Highcharts.getOptions().colors[0];for(e=0;10>e;e+=1)t.push(Highcharts.Color(o).brighten((e-3)/10).get());return t}(),$("#per").highcharts({chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!0,type:"pie",backgroundColor:"transparent"},title:{text:null},tooltip:{pointFormat:"<b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,color:"#e0e0e0",format:"{point.percentage:.1f} %",style:{textShadow:!1}}}},series:[{name:"Buy or Sell",data:[{name:"Buy",y:75.33},{name:"Sell",y:24.67}]}]})}function t(){$("#listOfSL").html(""),$("#remsym").html("");for(var e=a.length-1;e>=0;e--)i==e?$("#listOfSL").append('<div class="single active" id="'+e+'"><h3>'+a[e][1]+"</h3></div>"):$("#listOfSL").append('<div class="single" id="'+e+'"><h3>'+a[e][1]+"</h3></div>"),$("#remsym").append("<option value='"+a[e][2]+"''>"+a[e][0]+"</option>"),$("#sl").niceScroll()}function o(o){$.getJSON("scripts/getUserStocks.php",function(l){a=l,t(),t(i),o&&e(i)})}var a=[],i=0;$("#time").clock(),o(1),$("#sl").on("click",".single",function(){var t=parseInt($(this).attr("id"));t!=i&&(i=t,e(t))}),$("#logout").click(function(e){e.preventDefault(),$.ajax("scripts/logout.php"),window.location.href="http://localhost/stock_app/index.php"}),$("#addStock").submit(function(e){e.preventDefault();var t=$("#addStock").serialize();$.ajax("scripts/addUserStock.php?"+t).done(function(e){0==e?$("#addErr").html("This stock symbol is not valid.").fadeIn(500).delay(5e3).fadeOut(500):($("#addSuc").html("The stock has been added to your portfolio. Please wait while we load your portfolio...").fadeIn(500).delay(5e3).fadeOut(500),setTimeout(function(){$("#add").modal("hide"),o(0)},5e3))})}),$("#remStock").submit(function(t){t.preventDefault();var l=$("#remStock").serialize();$.ajax("scripts/removeUserStock.php?"+l).done(function(t){$("#remSuc").html("The stock has been removed from your portfolio. Please wait while we load your portfolio...").fadeIn(500).delay(5e3).fadeOut(),setTimeout(function(){$("#rem").modal("hide"),t==a[i][2]&&(i=0,e(0)),o(0)},5e3)})})});